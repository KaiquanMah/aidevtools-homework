# Docker Environment Explanation

This document explains the two different Docker environments used in this project: **Development** and **Production**.

## 1. Development Environment (`Dockerfile.dev`)

**Goal:** Optimize for developer experience (DX), speed, and debugging.

*   **Hot Reloading:** Code changes on your host machine are instantly reflected in the container (via Volumes).
*   **Servers:**
    *   **Frontend:** Uses `Vite` dev server (supports HMR - Hot Module Replacement).
    *   **Backend:** Uses `Uvicorn` with `--reload` flag.
*   **Size:** Larger image size. Contains full `node_modules`, compilers, and dev tools.
*   **Security:** Less secure (runs as root by default in many cases, exposes dev ports).
*   **Workflow:** You run `docker-compose up`, edit files in VS Code, and see changes instantly.

## 2. Production Environment (`Dockerfile.prod`)

**Goal:** Optimize for performance, security, and stability.

*   **Immutable:** The code is "baked" into the image. Changing files on your host does NOT affect the running container.
*   **Servers:**
    *   **Frontend:** `Nginx` serves the static HTML/CSS/JS files generated by `npm run build`. It is much faster and more efficient than Vite.
    *   **Backend:** `Gunicorn` (Green Unicorn) manages the Uvicorn workers. It handles multiple concurrent connections better and is robust against crashes.
*   **Size:** Tiny image size.
    *   Uses **Multi-stage builds**:
        1.  **Build Stage (Node):** Compiles React code.
        2.  **Final Stage (Python-Slim):** Copies *only* the compiled assets and Python code. Discards `node_modules` and compilers.
*   **Security:** Runs as a non-root user (if configured), no source code exposed (only compiled assets).
*   **Workflow:** You build the image once (`docker build`), push it to a registry, and deploy it to a server.

## Summary Comparison

| Feature | Development (`.dev`) | Production (`.prod`) |
| :--- | :--- | :--- |
| **Code Source** | Live Volumes (Sync) | Copied into Image (Static) |
| **Frontend** | Vite Dev Server | Nginx |
| **Backend** | Uvicorn (Reload) | Gunicorn (Process Manager) |
| **Dependencies** | Full (Dev + Prod) | Minimal (Prod only) |
| **Image Size** | Large (~1GB+) | Small (~200MB) |


## The Plan for Phase 6 - Docker Containers
We need to create 2 new files:

1. Dockerfile.prod: A "Multi-stage" build:
    * Stage 1: Build React app to static HTML/JS.
    * Stage 2: Setup Python environment.
    * Stage 3: Copy static files and Python code into a final, small image.

2. docker-compose.prod.yml: To run this optimized image without volumes.